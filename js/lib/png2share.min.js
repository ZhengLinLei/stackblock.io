function getPixels3d(e){var t=e.canvas,a=t.height,n=t.width,r=new Uint8Array(n*a*4);return e.readPixels(0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,r),r}function getPixels2d(e){var t=e.canvas,a=t.height,n=t.width;return e.getImageData(0,0,n,a).data}const Webgl2canvas=(e,t)=>{var a,n=t?t.canvas||t:document.createElement("canvas"),r=n.getContext("2d");return e=e instanceof WebGLRenderingContext?e:e.getContext("webgl2")||e.getContext("webgl")||e.getContext("experimental-webgl"),n.width=e.canvas.width,n.height=e.canvas.height,(a=r.getImageData(0,0,n.width,n.height)).data.set(new Uint8ClampedArray(getPixels3d(e).buffer)),r.putImageData(a,0,0),r.translate(0,n.height),r.scale(1,-1),r.drawImage(n,0,0),r.setTransform(1,0,0,1,0,0),n},DrawCanvasCopy=(e,t,a)=>{let n=Webgl2canvas(e);t(n.getContext("2d")),n.toBlob(a),n.remove()},Blob2Share=async e=>{if(!("share"in navigator&&"canShare"in navigator))return!1;const t={text:"Play with me. In Stackblock.io",title:"Stackblock.io",files:[new File([e],"newRecord.png",{type:e.type})]};if(!navigator.canShare(t))return console.warn("Sharing not supported",t),!1;try{await navigator.share(t)}catch(e){if("AbortError"!==e.name)return console.error(e.name,e.message),!1}},Blob2Download=e=>{let t=document.createElement("a"),a=window.URL.createObjectURL(e);t.href=a,t.download="StackBlock_newRecord.png",t.click(),window.URL.revokeObjectURL(a),t.remove()};