function getPixels3d(e){var t=e.canvas,a=t.height,n=t.width,n=new Uint8Array(n*a*4);return e.readPixels(0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,n),n}function getPixels2d(e){var t=e.canvas,a=t.height,t=t.width;return e.getImageData(0,0,t,a).data}const Webgl2canvas=(e,t)=>{var a,t=t?t.canvas||t:document.createElement("canvas"),n=t.getContext("2d");return e=e instanceof WebGLRenderingContext?e:e.getContext("webgl2")||e.getContext("webgl")||e.getContext("experimental-webgl"),t.width=e.canvas.width,t.height=e.canvas.height,(a=n.getImageData(0,0,t.width,t.height)).data.set(new Uint8ClampedArray(getPixels3d(e).buffer)),n.putImageData(a,0,0),n.translate(0,t.height),n.scale(1,-1),n.drawImage(t,0,0),n.setTransform(1,0,0,1,0,0),t},DrawCanvasCopy=(e,t,a)=>{e=Webgl2canvas(e);t(e.getContext("2d")),e.toBlob(a),e.remove()},Blob2Share=async e=>{let t=0;if(!("share"in navigator&&"canShare"in navigator))return!1;var a={text:"Play with me. In Stackblock.io",title:"Stackblock.io",files:[new File([e],"newRecord.png",{type:e.type})]};if(!navigator.canShare(a))return console.warn("Sharing not supported",a),!1;for(;;)try{return await navigator.share(a),!0}catch(e){if("AbortError"===e.name&&"aborterror"===e.name.toLowerCase())return!0;if(3<=t)return!1;t++}},Blob2Download=e=>{var t=document.createElement("a"),e=window.URL.createObjectURL(e);t.href=e,t.download="StackBlock_newRecord.png",t.click(),window.URL.revokeObjectURL(e),t.remove()};