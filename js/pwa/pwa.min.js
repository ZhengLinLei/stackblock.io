let deferredPrompt,enableDownload=!1,installBtn,installRejector;window.addEventListener("load",()=>{console.log("PWA ready!");let l=localStorage.getItem("PWA_installed"),t=localStorage.getItem("installDismissed");installBtn=document.querySelector("#pwa-install-btn"),installRejector=document.querySelector("#pwa-dismiss-btn"),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),deferredPrompt=e,console.log("Prepared"),(l=l||(window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone||"true"===localStorage.getItem("PWA_installed")?(localStorage.setItem("PWA_installed","true"),localStorage.getItem("PWA_installed")):(localStorage.removeItem("PWA_installed"),document.querySelector("#pwa-install").classList.remove("display"),!1)))&&"false"!=l||t&&"false"!=t?console.log("Installed before or install dismissed"):(enableDownload=!0,installRejector.addEventListener("click",()=>{localStorage.setItem("installDismissed","true"),document.querySelector("#pwa-install").classList.remove("display")}),installBtn.addEventListener("click",()=>{console.log("Installing..."),deferredPrompt.prompt(),deferredPrompt.userChoice.then(e=>{"accepted"===e.outcome?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt")}),enableDownload=!1}))}),window.addEventListener("appinstalled",e=>{deferredPrompt=null,console.log("👍","appinstalled",e),localStorage.setItem("PWA_installed","true")})});